<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Animation Studio - PhotoGenic</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        :root {
            --primary-color: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #818cf8;
            --secondary-color: #10b981;
            --secondary-dark: #059669;
            --secondary-light: #34d399;
            --gray-color: #94a3b8;
            --light-color: #e2e8f0;
            --dark-color: #1e293b;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --border-radius: 8px;
            --font-main: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
            --transition: all 0.2s ease-in-out;
            --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --card-glow: 0 0 15px rgba(99, 102, 241, 0.3);
        }

        body {
            margin: 0;
            padding: 0;
            font-family: var(--font-main);
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: var(--light-color);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Animated background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPgo8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiBmaWxsPSIjMTIxODJhIj48L3JlY3Q+CjxwYXRoIGQ9Ik0wIDVMNSAwWk02IDRMNCA2Wk0tMSAxTDEgLTFaIiBzdHJva2U9IiMyMDI4NDIiIHN0cm9rZS13aWR0aD0iMC41Ij48L3BhdGg+Cjwvc3ZnPg==');
            opacity: 0.3;
            z-index: -1;
            pointer-events: none;
        }
        
        /* Form elements */
        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--light-color);
            font-size: 0.95rem;
            letter-spacing: 0.5px;
        }

        .prompt-textarea {
            width: 100%;
            min-height: 100px;
            padding: 12px 16px;
            border-radius: var(--border-radius);
            border: 2px solid rgba(148, 163, 184, 0.2);
            background-color: rgba(30, 41, 59, 0.5);
            color: var(--light-color);
            font-family: var(--font-main);
            font-size: 1rem;
            resize: vertical;
            transition: var(--transition);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .prompt-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3), inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .select-container {
            position: relative;
            width: 100%;
        }

        .api-select {
            width: 100%;
            padding: 12px 16px;
            border-radius: var(--border-radius);
            border: 2px solid rgba(148, 163, 184, 0.2);
            background-color: rgba(30, 41, 59, 0.5);
            color: var(--light-color);
            font-family: var(--font-main);
            font-size: 1rem;
            appearance: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .api-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
        }

        .select-arrow {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 8px solid var(--gray-color);
            pointer-events: none;
        }
        
        /* Buttons */
        .btn-primary {
            display: block;
            width: 100%;
            padding: 14px 24px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            font-weight: 600;
            font-size: 1rem;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            margin-top: 12px;
        }

        .btn-primary:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.6s;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
            background: linear-gradient(135deg, var(--primary-dark), var(--secondary-dark));
        }

        .btn-primary:hover:before {
            left: 100%;
        }

        .btn-primary:active {
            transform: translateY(0);
            box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
        }

        .btn-primary i {
            margin-right: 8px;
        }

        .btn-primary:disabled {
            background: linear-gradient(135deg, #a5a6f3, #7dd3b0);
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        /* Header */
        .header {
            background-color: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: var(--light-color);
            font-weight: 600;
            font-size: 1.25rem;
        }

        .logo img {
            height: 36px;
            margin-right: 10px;
        }

        .nav-links {
            display: flex;
            gap: 24px;
        }

        .nav-link {
            color: var(--gray-color);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
        }

        .nav-link:after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0%;
            height: 2px;
            background-color: var(--primary-color);
            transition: var(--transition);
        }

        .nav-link:hover {
            color: var(--light-color);
        }

        .nav-link:hover:after {
            width: 100%;
        }

        .nav-link.active {
            color: var(--primary-light);
        }

        .nav-link.active:after {
            width: 100%;
        }
        
        /* Hero section */
        .hero {
            text-align: center;
            margin: 50px 0 40px;
            position: relative;
            overflow: hidden;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 16px;
            background: linear-gradient(135deg, var(--primary-light), var(--secondary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            display: inline-block;
        }

        .hero h1::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        .hero p {
            max-width: 700px;
            margin: 0 auto;
            font-size: 1.1rem;
            color: var(--gray-color);
            line-height: 1.7;
        }
        
        /* Main animation interface */
        .anim-interface {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 24px;
            background: rgba(15, 23, 42, 0.3);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(148, 163, 184, 0.1);
            margin-bottom: 50px;
            min-height: 600px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .anim-sidebar {
            border-right: 1px solid rgba(148, 163, 184, 0.1);
            background: rgba(15, 23, 42, 0.5);
            overflow-y: auto;
            max-height: 800px;
            padding: 24px;
            border-radius: 16px 0 0 16px;
            box-shadow: var(--card-shadow);
        }

        .content-container {
            padding: 24px;
            border-radius: 16px;
            background: rgba(15, 23, 42, 0.5);
            box-shadow: var(--card-shadow);
        }
        
        /* Animation stage */
        .animation-stage {
            height: 100%;
            min-height: 500px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(15, 23, 42, 0.8);
            position: relative;
            overflow: hidden;
        }

        /* Placeholder */
        #placeholder-message {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 32px;
            height: 100%;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.3), rgba(30, 41, 59, 0.3));
            border-radius: 8px;
            border: 1px dashed rgba(148, 163, 184, 0.2);
            animation: pulse 2s infinite ease-in-out;
        }

        @keyframes pulse {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }

        #placeholder-message i {
            font-size: 3rem;
            margin-bottom: 16px;
            color: var(--gray-color);
            opacity: 0.6;
        }

        #placeholder-message p {
            color: var(--gray-color);
            margin: 0;
            max-width: 400px;
        }

        /* Result Container */
        .result-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        /* Progress Container */
        .progress-container {
            margin-top: 24px;
            display: none;
            background: rgba(15, 23, 42, 0.5);
            border-radius: var(--border-radius);
            padding: 16px;
            text-align: center;
            border: 1px solid rgba(148, 163, 184, 0.1);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .step-progress {
            height: 8px;
            width: 100%;
            background-color: rgba(148, 163, 184, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
        }

        .step-status {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 4px;
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .step-status::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-container span {
            color: var(--gray-color);
            font-size: 0.9rem;
        }
        
        /* Animation result styles */
        .animation-result {
            display: none;
            padding: 24px;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        }

        .animation-header h3 {
            margin: 0;
            color: var(--primary-light);
            position: relative;
            padding-left: 15px;
        }

        .animation-header h3::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 18px;
            background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        .provider-info {
            color: var(--gray-color);
            font-size: 0.9rem;
            background: rgba(30, 41, 59, 0.3);
            padding: 6px 12px;
            border-radius: 20px;
            display: flex;
            align-items: center;
        }

        .provider-info span {
            color: var(--secondary-color);
            font-weight: 500;
            margin-left: 5px;
        }

        .animation-display-container {
            position: relative;
            background: rgba(15, 23, 42, 0.5);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(148, 163, 184, 0.1);
            aspect-ratio: 16/9;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .animation-display {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .animation-video, .animation-image {
            max-width: 100%;
            max-height: 100%;
            display: block;
            object-fit: contain;
        }

        .animation-controls {
            position: absolute;
            bottom: 16px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 8px 16px;
            border-radius: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .animation-display-container:hover .animation-controls {
            opacity: 1;
        }

        .animation-controls button {
            background: transparent;
            border: none;
            color: var(--light-color);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .animation-controls button:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--primary-light);
        }

        .animation-controls button:disabled {
            color: var(--gray-color);
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Story result styles */
        .story-result {
            margin: 24px 0;
            padding: 24px;
            background: rgba(16, 185, 129, 0.05);
            border-radius: var(--border-radius);
            border: 1px solid rgba(16, 185, 129, 0.2);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            position: relative;
            animation: fadeIn 0.5s ease-out 0.2s backwards;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .story-result:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1), 0 0 15px rgba(16, 185, 129, 0.2);
        }

        .story-result::before {
            content: '"';
            position: absolute;
            top: 10px;
            left: 15px;
            font-size: 42px;
            font-family: Georgia, serif;
            color: rgba(16, 185, 129, 0.2);
            line-height: 1;
        }

        .story-result h3 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 16px;
            font-family: 'Georgia', serif;
            position: relative;
            padding-bottom: 12px;
        }

        .story-result h3:after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 40px;
            height: 2px;
            background-color: var(--secondary-color);
        }

        .story-content {
            color: var(--light-color);
            line-height: 1.8;
            font-size: 1rem;
            position: relative;
            padding: 0 8px;
        }

        /* Prompt info */
        .prompt-info {
            margin: 20px 0;
            padding: 16px;
            background: rgba(30, 41, 59, 0.4);
            border-radius: var(--border-radius);
            border-left: 3px solid var(--primary-color);
            animation: fadeIn 0.5s ease-out 0.3s backwards;
        }

        .prompt-label {
            font-weight: 500;
            color: var(--primary-light);
            margin-bottom: 4px;
        }

        .prompt-value {
            color: var(--gray-color);
            font-style: italic;
            line-height: 1.5;
        }

        /* Action buttons */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            flex-wrap: wrap;
            animation: fadeIn 0.5s ease-out 0.4s backwards;
        }

        .btn-action {
            padding: 10px 18px;
            border-radius: 30px;
            background-color: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(99, 102, 241, 0.2);
            color: var(--light-color);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 120px;
            justify-content: center;
        }

        .btn-action:hover {
            background-color: rgba(99, 102, 241, 0.1);
            border-color: rgba(99, 102, 241, 0.5);
            transform: translateY(-2px);
        }

        .btn-action:active {
            transform: translateY(0);
        }

        .btn-action i {
            font-size: 0.9rem;
        }

        .btn-action:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Toast notifications */
        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 350px;
        }

        .toast {
            background-color: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 12px 16px;
            color: var(--light-color);
            font-size: 0.9rem;
            margin-top: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: flex-start;
            border-left: 4px solid var(--primary-color);
            animation: slideIn 0.3s ease-out forwards;
            opacity: 0;
            transform: translateX(100%);
        }

        @keyframes slideIn {
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes slideOut {
            from { opacity: 1; transform: translateX(0); }
            to { opacity: 0; transform: translateX(100%); }
        }

        .toast.slide-out {
            animation: slideOut 0.3s ease-in forwards;
        }

        .toast.success {
            border-left-color: var(--secondary-color);
        }

        .toast.error {
            border-left-color: var(--danger-color);
        }

        .toast.warning {
            border-left-color: var(--warning-color);
        }

        .toast-icon {
            margin-right: 12px;
            font-size: 1.2rem;
        }

        .toast.success .toast-icon {
            color: var(--secondary-color);
        }

        .toast.error .toast-icon {
            color: var(--danger-color);
        }

        .toast.warning .toast-icon {
            color: var(--warning-color);
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .toast-message {
            color: var(--gray-color);
            line-height: 1.4;
        }

        .toast-close {
            background: transparent;
            border: none;
            color: var(--gray-color);
            cursor: pointer;
            padding: 0;
            font-size: 1rem;
            opacity: 0.7;
            transition: var(--transition);
        }

        .toast-close:hover {
            opacity: 1;
            color: var(--light-color);
        }

        /* Status Bar */
        .status-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-top: 1px solid rgba(148, 163, 184, 0.1);
            padding: 8px 16px;
            color: var(--gray-color);
            font-size: 0.85rem;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            margin-right: 16px;
        }
        
        .status-item i {
            margin-right: 6px;
            font-size: 0.9rem;
        }
        
        .status-item.live {
            color: var(--secondary-color);
        }
        
        .status-left, .status-right {
            display: flex;
            align-items: center;
        }
        
        /* Theme Switcher */
        .theme-switcher {
            margin-left: 16px;
            position: relative;
        }
        
        .theme-switch {
            display: inline-block;
            height: 24px;
            position: relative;
            width: 44px;
        }
        
        .theme-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(30, 41, 59, 0.6);
            transition: .4s;
            border-radius: 24px;
            border: 1px solid rgba(148, 163, 184, 0.2);
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 2px;
            background-color: var(--light-color);
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        
        input:checked + .slider:before {
            transform: translateX(20px);
        }
        
        .theme-icons {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 6px;
            box-sizing: border-box;
            pointer-events: none;
            color: var(--light-color);
            font-size: 0.7rem;
        }
        
        /* Notification system styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            max-width: 350px;
            background: rgba(15, 23, 42, 0.95);
            color: var(--light-color);
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: flex;
            overflow: hidden;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            transform: translateX(150%);
            transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
        }
        
        .notification.info::before {
            background: var(--primary-color);
        }
        
        .notification.success::before {
            background: var(--secondary-color);
        }
        
        .notification.error::before {
            background: var(--danger-color);
        }
        
        .notification-icon {
            margin-right: 12px;
            font-size: 1.5rem;
        }
        
        .notification-content {
            flex: 1;
        }
        
        .notification-title {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .notification-message {
            font-size: 0.9rem;
            color: var(--gray-color);
        }
        
        .notification-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .notification-progress-bar {
            height: 100%;
            width: 100%;
            background: var(--primary-color);
            animation: progress 3s linear forwards;
        }
        
        @keyframes progress {
            0% {
                width: 100%;
            }
            100% {
                width: 0%;
            }
        }
        
        /* Media queries */
        @media (max-width: 1100px) {
            .anim-interface {
                grid-template-columns: 1fr;
            }

            .anim-sidebar {
                border-right: none;
                border-bottom: 1px solid rgba(148, 163, 184, 0.1);
                max-height: none;
            }
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2rem;
            }

            .content-container {
                padding: 16px;
            }
        }
        
        /* Button effects */
        .btn-primary, .btn-action {
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary:after, .btn-action:after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(40, 40);
                opacity: 0;
            }
        }
        
        .btn-primary.animate:after, .btn-action.animate:after {
            animation: ripple 600ms linear;
        }
        
        /* Keyboard shortcuts modal */
        .shortcuts-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        .shortcuts-content {
            background: rgba(30, 41, 59, 0.9);
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(99, 102, 241, 0.2);
            padding: 24px;
            position: relative;
        }
        
        .shortcuts-title {
            color: var(--primary-light);
            margin-top: 0;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .shortcuts-title span {
            font-size: 0.9rem;
            color: var(--gray-color);
        }
        
        .shortcuts-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            color: var(--gray-color);
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .shortcuts-close:hover {
            color: var(--light-color);
            transform: rotate(90deg);
        }
        
        .shortcuts-section {
            margin-bottom: 24px;
        }
        
        .shortcuts-section h3 {
            color: var(--secondary-color);
            font-size: 1.1rem;
            margin-bottom: 12px;
        }
        
        .shortcuts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 12px;
        }
        
        .shortcut-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 6px;
            border: 1px solid rgba(148, 163, 184, 0.1);
        }
        
        .shortcut-key {
            display: flex;
            gap: 5px;
        }
        
        .key {
            background: rgba(99, 102, 241, 0.1);
            color: var(--light-color);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 4px;
            padding: 2px 6px;
            font-size: 0.8rem;
            min-width: 24px;
            text-align: center;
            box-shadow: 0 2px 0 rgba(0, 0, 0, 0.1);
        }
        
        .shortcut-label {
            color: var(--gray-color);
            font-size: 0.9rem;
        }
        
        /* Glare effect for cards */
        .glare-effect {
            position: absolute;
            width: 50px;
            height: 100px;
            background: linear-gradient(
                45deg,
                rgba(255, 255, 255, 0.1) 0%,
                rgba(255, 255, 255, 0.05) 100%
            );
            filter: blur(20px);
            transform: skewX(-30deg);
            top: 0;
            right: 0;
            transition: all 0.3s ease;
            opacity: 0;
            pointer-events: none;
        }
        
        .animation-display-container:hover .glare-effect {
            opacity: 1;
        }
        
        /* Enhanced Button Styles */
        .btn-primary, .btn-action {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            transform: translateY(0);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:hover, .btn-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(99, 102, 241, 0.4);
        }

        .btn-primary:active, .btn-action:active {
            transform: translateY(1px);
            box-shadow: 0 2px 6px rgba(99, 102, 241, 0.2);
        }

        /* Ripple effect */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.4);
            transform: scale(0);
            animation: ripple 0.6s linear;
            pointer-events: none;
        }

        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* Animation stage enhancements */
        .animation-stage {
            position: relative;
            transition: all 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        .animation-stage:hover .animation-controls {
            opacity: 1;
        }
        
        /* Enhanced form elements */
        .prompt-textarea {
            transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
        }
        
        .prompt-textarea:focus {
            transform: translateY(-2px);
        }
        
        /* Style Select on Focus */
        .api-select:focus + .select-arrow {
            transform: rotate(180deg) translateY(3px);
            border-top-color: var(--primary-color);
        }
        
        /* Enhanced progress visualization */
        .step-status {
            position: relative;
            overflow: hidden;
        }
        
        .step-status:after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                90deg, 
                rgba(255, 255, 255, 0) 0%, 
                rgba(255, 255, 255, 0.5) 50%, 
                rgba(255, 255, 255, 0) 100%
            );
            width: 50%;
            transform: translateX(-100%);
            animation: loading-shimmer 1.5s infinite;
        }
        
        @keyframes loading-shimmer {
            100% {
                transform: translateX(200%);
            }
        }
        
        /* Stylish placeholder for animation area */
        #placeholder-message {
            position: relative;
            overflow: hidden;
        }
        
        #placeholder-message:after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                rgba(99, 102, 241, 0) 0%,
                rgba(99, 102, 241, 0.05) 50%,
                rgba(99, 102, 241, 0) 100%
            );
            transform: rotate(45deg);
            animation: placeholder-sweep 3s infinite linear;
        }
        
        @keyframes placeholder-sweep {
            0% {
                transform: translateX(-100%) rotate(45deg);
            }
            100% {
                transform: translateX(100%) rotate(45deg);
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="/" class="logo">
                    <i class="fas fa-camera-retro"></i> PhotoGenic
                </a>
                <nav class="nav-links">
                    <a href="/" class="nav-link">Home</a>
                    <a href="/ai-features" class="nav-link">AI Features</a>
                    <a href="/collections" class="nav-link">Collections</a>
                    <a href="/about" class="nav-link">About</a>
                </nav>
                <div class="theme-switcher">
                    <label class="theme-switch">
                        <input type="checkbox" id="theme-switch">
                        <span class="slider"></span>
                        <div class="theme-icons">
                            <i class="fas fa-sun"></i>
                            <i class="fas fa-moon"></i>
                        </div>
                    </label>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <section class="hero">
            <h1>AI Animation Studio</h1>
            <p>Transform your ideas into stunning animations with the power of AI. Just describe what you want to see, and our advanced AI will bring your vision to life.</p>
        </section>

        <div class="anim-interface">
            <div class="anim-sidebar">
                <!-- Prompt-based Animation -->
                <div id="prompt-form" class="content-container">
                    <h3>Generate Animation from Text</h3>
                    <p class="intro-text">
                        Describe what you want to see, and our AI will transform your words into moving visuals.
                        Be creative and descriptive!
                    </p>
                    
                    <div class="form-group">
                        <label for="prompt-input">Your Animation Prompt</label>
                        <textarea id="prompt-input" class="prompt-textarea" placeholder="Example: A serene lake with mountains in the background, birds flying across the sunset sky with ripples on the water"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="api-provider">Animation Style</label>
                        <div class="select-container">
                            <select id="api-provider" class="api-select">
                                <option value="picsart">Cinematic</option>
                                <option value="runway">Artistic</option>
                                <option value="did">Realistic</option>
                                <option value="replicate">Abstract</option>
                            </select>
                            <div class="select-arrow"></div>
                        </div>
                    </div>
                    
                    <button id="generate-prompt-btn" class="btn-primary">
                        <i class="fas fa-magic"></i> Generate Animation
                    </button>
                    
                    <div id="generation-progress" class="progress-container">
                        <div class="step-progress">
                            <div class="step-status"></div>
                        </div>
                        <span>Initializing...</span>
                    </div>
                </div>
            </div>

            <div class="anim-main">
                <div id="animation-stage">
                    <div id="placeholder-message">
                        <i class="fas fa-film" style="font-size: 3rem; color: rgba(107, 107, 255, 0.3); margin-bottom: 20px;"></i>
                        <p style="color: #b8b8b8; text-align: center;">Your animation will appear here</p>
                        <p style="color: #777; font-size: 0.9rem; text-align: center; margin-top: 10px;">
                            Enter a detailed prompt on the left panel and click "Generate Animation" to start
                        </p>
                    </div>
                    
                    <div id="animation-result" class="animation-result">
                        <div class="animation-header">
                            <h3>Your Animation</h3>
                            <div class="provider-info">
                                Generated with: <span id="result-provider">Cinematic Style</span>
                            </div>
                        </div>
                        
                        <div class="animation-display-container">
                            <div id="animation-display" class="animation-display"></div>
                            
                            <div class="animation-controls">
                                <button id="play-btn" title="Play" disabled><i class="fas fa-play"></i></button>
                                <button id="pause-btn" title="Pause" disabled><i class="fas fa-pause"></i></button>
                                <button id="reset-btn" title="Restart" disabled><i class="fas fa-redo"></i></button>
                                <button id="fullscreen-btn" title="Fullscreen" disabled><i class="fas fa-expand"></i></button>
                            </div>
                            <div class="glare-effect"></div>
                        </div>
                        
                        <div id="story-result" class="story-result">
                            <h3>The Story Behind Your Animation</h3>
                            <p id="story-content" class="story-content">Your creative story will appear here...</p>
                        </div>
                        
                        <div class="prompt-info">
                            <div class="prompt-label">Your Prompt:</div>
                            <div id="result-prompt" class="prompt-value"></div>
                        </div>
                        
                        <div class="action-buttons">
                            <button id="download-btn" class="btn-action" disabled><i class="fas fa-download"></i> Download</button>
                            <button id="share-btn" class="btn-action" disabled><i class="fas fa-share-alt"></i> Copy Link</button>
                            <button id="new-animation-btn" class="btn-action"><i class="fas fa-plus"></i> New Animation</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Status Bar -->
    <div class="status-bar">
        <div class="status-left">
            <div class="status-item">
                <i class="fas fa-code-branch"></i>
                <span>main</span>
            </div>
            <div class="status-item live">
                <i class="fas fa-circle"></i>
                <span>API Connected</span>
            </div>
        </div>
        <div class="status-right">
            <div class="status-item" id="clock">
                <i class="fas fa-clock"></i>
                <span>00:00:00</span>
            </div>
            <div class="status-item">
                <i class="fas fa-keyboard"></i>
                <span id="shortcuts-trigger" style="cursor: pointer;">Shortcuts (?)</span>
            </div>
        </div>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div class="shortcuts-modal" id="shortcuts-modal">
        <div class="shortcuts-content">
            <h2 class="shortcuts-title">
                Keyboard Shortcuts
                <span>Press ESC to close</span>
            </h2>
            <button class="shortcuts-close" id="shortcuts-close">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="shortcuts-section">
                <h3>Animation Controls</h3>
                <div class="shortcuts-grid">
                    <div class="shortcut-item">
                        <div class="shortcut-label">Generate Animation</div>
                        <div class="shortcut-key">
                            <span class="key">Ctrl</span>
                            <span class="key">Enter</span>
                        </div>
                    </div>
                    <div class="shortcut-item">
                        <div class="shortcut-label">Play/Pause</div>
                        <div class="shortcut-key">
                            <span class="key">Space</span>
                        </div>
                    </div>
                    <div class="shortcut-item">
                        <div class="shortcut-label">Reset Animation</div>
                        <div class="shortcut-key">
                            <span class="key">R</span>
                        </div>
                    </div>
                    <div class="shortcut-item">
                        <div class="shortcut-label">Fullscreen</div>
                        <div class="shortcut-key">
                            <span class="key">F</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="shortcuts-section">
                <h3>Navigation</h3>
                <div class="shortcuts-grid">
                    <div class="shortcut-item">
                        <div class="shortcut-label">Return to AI Features</div>
                        <div class="shortcut-key">
                            <span class="key">Alt</span>
                            <span class="key">H</span>
                        </div>
                    </div>
                    <div class="shortcut-item">
                        <div class="shortcut-label">New Animation</div>
                        <div class="shortcut-key">
                            <span class="key">Alt</span>
                            <span class="key">N</span>
                        </div>
                    </div>
                    <div class="shortcut-item">
                        <div class="shortcut-label">Toggle Theme</div>
                        <div class="shortcut-key">
                            <span class="key">Alt</span>
                            <span class="key">T</span>
                        </div>
                    </div>
                    <div class="shortcut-item">
                        <div class="shortcut-label">Show Shortcuts</div>
                        <div class="shortcut-key">
                            <span class="key">?</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="glow-effect"></div>
    <div class="glow-effect"></div>

    <script>
        // Toast notification system
        function showToast(type, title, message, duration = 3000) {
            const toastContainer = document.getElementById('toast-container');
            
            // Create toast element
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;

            // Create icon based on type
            let iconClass = '';
            switch(type) {
                case 'success':
                    iconClass = 'fa-check-circle';
                    break;
                case 'error':
                    iconClass = 'fa-exclamation-circle';
                    break;
                case 'info':
                    iconClass = 'fa-info-circle';
                    break;
                case 'warning':
                    iconClass = 'fa-exclamation-triangle';
                    break;
            }

            // Set toast content
            toast.innerHTML = `
                <div class="toast-icon">
                    <i class="fas ${iconClass}"></i>
                </div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
            `;

            // Add toast to the container
            toastContainer.appendChild(toast);

            // Remove toast after duration
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => {
                    toast.remove();
                }, 300);
            }, duration);
        }

        // Mouse glow effect
        document.addEventListener('mousemove', (e) => {
            const glowEffects = document.querySelectorAll('.glow-effect');

            glowEffects.forEach((glow, index) => {
                if (index === 0) {
                    glow.style.left = `${e.clientX - 100}px`;
                    glow.style.top = `${e.clientY - 100}px`;
                    glow.style.opacity = '0.5';
                } else {
                    glow.style.left = `${e.clientX - 50}px`;
                    glow.style.top = `${e.clientY - 50}px`;
                    glow.style.opacity = '0.3';
                }
            });
        });

        // Show notification function
        function showNotification(type, title, message, duration = 3000) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;

            // Create icon based on type
            let iconClass = '';
            switch(type) {
                case 'success':
                    iconClass = 'fa-check-circle';
                    break;
                case 'error':
                    iconClass = 'fa-exclamation-circle';
                    break;
                case 'info':
                    iconClass = 'fa-info-circle';
                    break;
                case 'warning':
                    iconClass = 'fa-exclamation-triangle';
                    break;
            }

            notification.innerHTML = `
                <div class="notification-icon">
                    <i class="fas ${iconClass}"></i>
                </div>
                <div class="notification-content">
                    <div class="notification-title">${title}</div>
                    <div class="notification-message">${message}</div>
                </div>
                <div class="notification-progress">
                    <div class="notification-progress-bar"></div>
                </div>
            `;

            document.body.appendChild(notification);

            // Show with animation
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);

            // Set dynamic transition for progress bar
            document.querySelector('.notification-progress-bar').style.transition = `width ${duration}ms linear`;

            // Remove notification after duration
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, duration);
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Theme switcher
            const themeSwitch = document.getElementById('theme-switch');

            // Check for saved theme preference
            if (localStorage.getItem('darkTheme') === 'true') {
                document.body.classList.add('dark-theme');
                themeSwitch.checked = true;
            }

            // Toggle theme
            themeSwitch.addEventListener('change', function() {
                if (this.checked) {
                    document.body.classList.add('dark-theme');
                    localStorage.setItem('darkTheme', 'true');
                    showNotification('info', 'Dark Mode Enabled', 'Your eyes will thank you!', 2000);
                } else {
                    document.body.classList.remove('dark-theme');
                    localStorage.setItem('darkTheme', 'false');
                    showNotification('info', 'Light Mode Enabled', 'Brightness is back!', 2000);
                }
            });

            // Keyboard shortcuts modal
            const shortcutsModal = document.getElementById('shortcuts-modal');
            const shortcutsTrigger = document.getElementById('shortcuts-trigger');
            const shortcutsClose = document.getElementById('shortcuts-close');

            // Open shortcuts modal
            shortcutsTrigger.addEventListener('click', function() {
                shortcutsModal.style.display = 'flex';
            });

            // Close shortcuts modal
            shortcutsClose.addEventListener('click', function() {
                shortcutsModal.style.display = 'none';
            });

            // Close on ESC key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && shortcutsModal.style.display === 'flex') {
                    shortcutsModal.style.display = 'none';
                }

                // Toggle shortcuts modal with ?
                if (e.key === '?' && shortcutsModal.style.display !== 'flex') {
                    shortcutsModal.style.display = 'flex';
                }

                // Keyboard shortcuts for animation controls
                if (document.getElementById('animation-display').querySelector('video')) {
                    const video = document.getElementById('animation-display').querySelector('video');

                    // Space = Play/Pause
                    if (e.key === ' ' && !e.target.matches('input, textarea')) {
                        e.preventDefault();
                        if (video.paused) {
                            video.play();
                        } else {
                            video.pause();
                        }
                    }

                    // R = Reset
                    if (e.key === 'r' || e.key === 'R') {
                        video.currentTime = 0;
                        video.play();
                    }

                    // F = Fullscreen
                    if (e.key === 'f' || e.key === 'F') {
                        if (!document.fullscreenElement) {
                            document.querySelector('.animation-display-container').requestFullscreen().catch(err => {
                                console.error('Error attempting to enable fullscreen:', err);
                            });
                        } else {
                            document.exitFullscreen();
                        }
                    }
                }

                // Ctrl+Enter = Generate animation
                if ((e.ctrlKey) && e.key === 'Enter') {
                    document.getElementById('generate-prompt-btn').click();
                }

                // Alt+H = Return to AI Features
                if (e.altKey && (e.key === 'h' || e.key === 'H')) {
                    window.location.href = '/ai-features';
                }

                // Alt+N = New Animation
                if (e.altKey && (e.key === 'n' || e.key === 'N')) {
                    document.getElementById('new-animation-btn').click();
                }

                // Alt+T = Toggle Theme
                if (e.altKey && (e.key === 't' || e.key === 'T')) {
                    document.getElementById('theme-switch').click();
                }
            });

            // Update clock in status bar
            function updateClock() {
                const clockElement = document.querySelector('#clock span');
                const now = new Date();

                // Format time as HH:MM:SS
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                const seconds = String(now.getSeconds()).padStart(2, '0');

                clockElement.textContent = hours + ':' + minutes + ':' + seconds;
            }

            // Initial clock update and interval
            updateClock();
            setInterval(updateClock, 1000);

            // Button ripple effect
            const buttons = document.querySelectorAll('.btn-primary, .btn-action');

            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const x = e.clientX - e.target.getBoundingClientRect().left;
                    const y = e.clientY - e.target.getBoundingClientRect().top;

                    const ripple = document.createElement('span');
                    ripple.classList.add('ripple');
                    ripple.style.left = x + 'px';
                    ripple.style.top = y + 'px';

                    this.appendChild(ripple);

                    this.classList.add('animate');

                    setTimeout(() => {
                        ripple.remove();
                        this.classList.remove('animate');
                    }, 600);
                });
            });

            // Fullscreen functionality
            const fullscreenBtn = document.getElementById('fullscreen-btn');
            const animationContainer = document.querySelector('.animation-display-container');

            fullscreenBtn.addEventListener('click', () => {
                if (!document.fullscreenElement) {
                    animationContainer.requestFullscreen().catch(err => {
                        console.error('Error attempting to enable fullscreen:', err);
                    });
                } else {
                    document.exitFullscreen();
                }
            });

            // Show welcome notification
            setTimeout(() => {
                showNotification('info', 'Welcome to AI Animation Studio', 'Create stunning animations with just a text prompt!', 5000);
            }, 1000);
        });

        // Function to get friendly provider name for display
        function getProviderDisplayName(provider) {
            switch(provider) {
                case 'picsart':
                    return 'Cinematic Style';
                case 'runway':
                    return 'Artistic Style';
                case 'did':
                    return 'Realistic Style';
                case 'replicate':
                    return 'Abstract Style';
                default:
                    return 'Custom Style';
            }
        }

        // Animation generation functionality
        document.addEventListener('DOMContentLoaded', () => {
            const promptInput = document.getElementById('prompt-input');
            const apiProviderSelect = document.getElementById('api-provider');
            const generateBtn = document.getElementById('generate-prompt-btn');

            const progressContainer = document.getElementById('generation-progress');
            const stepStatus = document.querySelector('.step-status');
            const progressText = progressContainer.querySelector('span');

            const placeholderMessage = document.getElementById('placeholder-message');
            const animationResult = document.getElementById('animation-result');
            const animationDisplay = document.getElementById('animation-display');

            const playBtn = document.getElementById('play-btn');
            const pauseBtn = document.getElementById('pause-btn');
            const resetBtn = document.getElementById('reset-btn');
            const fullscreenBtn = document.getElementById('fullscreen-btn');
            const downloadBtn = document.getElementById('download-btn');
            const shareBtn = document.getElementById('share-btn');
            const newAnimationBtn = document.getElementById('new-animation-btn');

            const resultProvider = document.getElementById('result-provider');
            const resultPrompt = document.getElementById('result-prompt');
            const storyContent = document.getElementById('story-content');

            let progressInterval;
            let progress = 0;
            let animationFile = null;
            let currentAnimation = null;

            // Generate animation from prompt
            generateBtn.addEventListener('click', async () => {
                const prompt = promptInput.value.trim();
                const provider = apiProviderSelect.value;

                if (!prompt) {
                    showToast('error', 'Empty Prompt', 'Please enter a prompt to generate an animation.');
                    return;
                }

                // Reset UI state
                placeholderMessage.style.display = 'flex';
                animationResult.style.display = 'none';
                animationDisplay.innerHTML = '';

                // Show progress
                progressContainer.style.display = 'block';
                stepStatus.style.width = '0%';
                progressText.textContent = 'Preparing your animation...';

                // Simulate progress updates
                progress = 0;
                progressInterval = setInterval(() => {
                    if (progress < 95) {
                        // Add slight randomness to make it feel more realistic
                        const increment = Math.random() * 10 * (1 - progress/100); // Slow down as we get closer to 100%
                        progress += increment;
                        if (progress > 95) progress = 95;

                        // Smooth transition for progress bar
                        stepStatus.style.transition = 'width 0.8s cubic-bezier(0.165, 0.84, 0.44, 1)';
                        stepStatus.style.width = progress + '%';

                        // Update status message with typing animation effect
                        if (progress < 30) {
                            animateText('Processing your prompt...');
                        } else if (progress < 60) {
                            animateText('Generating animation frames...');
                        } else if (progress < 85) {
                            animateText('Adding final touches...');
                        } else {
                            animateText('Almost ready...');
                        }
                    }
                }, 700); // Slightly slower updates for a more realistic feel

                try {
                    // Call server to generate animation
                    const formData = new FormData();
                    formData.append('prompt', prompt);
                    formData.append('provider', provider);

                    const response = await fetch('/generate-animation', {
                        method: 'POST',
                        body: formData
                    });

                    clearInterval(progressInterval);

                    if (!response.ok) {
                        throw new Error('Server responded with ' + response.status + ': ' + response.statusText);
                    }

                    const responseData = await response.json();

                    // Completed successfully
                    stepStatus.style.width = '100%';
                    progressText.textContent = 'Animation generated successfully!';

                    // Display the animation result
                    setTimeout(() => {
                        progressContainer.style.display = 'none';
                        placeholderMessage.style.display = 'none';
                        animationResult.style.display = 'block';

                        resultProvider.textContent = getProviderDisplayName(provider);
                        resultPrompt.textContent = prompt;

                        // Set story content
                        if (responseData.story) {
                            storyContent.textContent = responseData.story;
                        } else {
                            storyContent.textContent = "No story was generated for this animation.";
                        }

                        // Display the animation
                        if (responseData.video_url) {
                            animationFile = responseData.video_url;

                            // Create video element with string concatenation instead of template literals
                            const videoContainer = document.createElement('div');
                            videoContainer.className = 'video-container';
                            videoContainer.innerHTML =
                                '<video id="animation-video" controls>' +
                                '<source src="' + responseData.video_url + '" type="video/mp4">' +
                                'Your browser does not support the video tag.' +
                                '</video>' +
                                '<div class="animation-controls">' +
                                '<button class="btn-action" onclick="document.getElementById(\'animation-video\').play()">' +
                                '<i class="fas fa-play"></i>' +
                                '</button>' +
                                '<button class="btn-action" onclick="document.getElementById(\'animation-video\').pause()">' +
                                '<i class="fas fa-pause"></i>' +
                                '</button>' +
                                '<a href="' + responseData.video_url + '" download="animation.mp4" class="btn-action">' +
                                '<i class="fas fa-download"></i>' +
                                '</a>' +
                                '</div>';

                            animationDisplay.appendChild(videoContainer);

                            // Enable control buttons
                            playBtn.disabled = false;
                            pauseBtn.disabled = false;
                            resetBtn.disabled = false;
                            fullscreenBtn.disabled = false;
                            downloadBtn.disabled = false;
                            shareBtn.disabled = false;

                            // Video control button functions
                            playBtn.onclick = () => {
                                document.getElementById('animation-video').play();
                                showToast('info', 'Playback', 'Animation playing');
                            };

                            pauseBtn.onclick = () => {
                                document.getElementById('animation-video').pause();
                                showToast('info', 'Playback', 'Animation paused');
                            };

                            resetBtn.onclick = () => {
                                document.getElementById('animation-video').currentTime = 0;
                                document.getElementById('animation-video').play();
                                showToast('info', 'Playback', 'Animation restarted');
                            };

                            // Update animation download link
                            downloadBtn.onclick = () => {
                                const downloadLink = document.createElement('a');
                                downloadLink.href = animationFile;
                                downloadLink.download = 'animation-' + new Date().getTime() + '.mp4';
                                downloadLink.click();
                                showToast('success', 'Download Started', 'Your animation is being downloaded');
                            };

                            // Show success notification
                            showNotification('success', 'Animation Ready!', 'Your animation has been generated successfully.', 5000);
                        } else if (responseData.image_url) {
                            // If an image was returned instead of video
                            animationFile = responseData.image_url;

                            const img = document.createElement('img');
                            img.src = animationFile;
                            img.className = 'animation-image';
                            animationDisplay.appendChild(img);

                            // Enable download button
                            downloadBtn.disabled = false;
                            shareBtn.disabled = false;

                            // Update image download link
                            downloadBtn.onclick = () => {
                                const downloadLink = document.createElement('a');
                                downloadLink.href = animationFile;
                                downloadLink.download = 'image-' + new Date().getTime() + '.jpg';
                                downloadLink.click();
                                showToast('success', 'Download Started', 'Your image is being downloaded');
                            };
                        } else {
                            throw new Error('No animation or image was returned');
                        }
                    }, 1000);
                } catch (error) {
                    clearInterval(progressInterval);

                    // Show error in the UI
                    stepStatus.style.width = '100%';
                    progressText.textContent = 'Error generating animation';
                    progressContainer.style.color = 'var(--danger-color)';

                    console.error('Error generating animation:', error);
                    showToast('error', 'Generation Failed', error.message || 'Failed to generate animation. Please try again.');

                    // Reset UI after delay
                    setTimeout(() => {
                        progressContainer.style.display = 'none';
                        progressContainer.style.color = '';
                    }, 3000);
                }
            });

            // Download button functionality
            downloadBtn.addEventListener('click', () => {
                if (animationFile) {
                    // Logic handled above in separate places for video vs image
                } else {
                    showToast('error', 'Nothing to Download', 'Generate an animation first.');
                }
            });

            // Share button functionality
            shareBtn.addEventListener('click', () => {
                if (animationFile) {
                    // Create temporary input for copying
                    const input = document.createElement('input');
                    input.value = 'Check out this animation I created with PhotoGenic AI: ' + window.location.origin + '/view?file=' + encodeURIComponent(animationFile);
                    document.body.appendChild(input);
                    input.select();
                    document.execCommand('copy');
                    document.body.removeChild(input);

                    showToast('success', 'Link Copied', 'Share link copied to clipboard!');
                } else {
                    showToast('error', 'Nothing to Share', 'Generate an animation first.');
                }
            });

            // New animation button
            newAnimationBtn.addEventListener('click', () => {
                // Reset UI
                placeholderMessage.style.display = 'flex';
                animationResult.style.display = 'none';
                animationDisplay.innerHTML = '';

                // Clear input and reset state
                promptInput.value = '';
                animationFile = null;
                currentAnimation = null;

                // Reset buttons
                playBtn.disabled = true;
                pauseBtn.disabled = true;
                resetBtn.disabled = true;
                fullscreenBtn.disabled = true;
                downloadBtn.disabled = true;
                shareBtn.disabled = true;

                // Focus on prompt input
                promptInput.focus();

                showToast('info', 'New Animation', 'Ready for your next creation!');
            });

            // Initial random prompt suggestion
            const promptSuggestions = [
                "A serene lake with mountains in the background, birds flying across the sunset sky",
                "A futuristic city with flying cars and neon lights at night",
                "A magical forest with glowing mushrooms and fairy dust",
                "An underwater scene with colorful coral reefs and exotic fish",
                "A space station orbiting a vibrant nebula with distant stars",
                "A cozy coffee shop during a rainy day with people reading books",
                "A medieval castle on a hill with dragons circling above",
                "A Japanese garden with cherry blossoms falling gently in the wind"
            ];

            // Set a random placeholder suggestion
            promptInput.placeholder = promptSuggestions[Math.floor(Math.random() * promptSuggestions.length)];

            // Auto-focus on the prompt input when the page loads
            promptInput.focus();
        });

        // Button Interaction Enhancements
        function addButtonInteractivity() {
            // Add ripple effect to all buttons
            document.querySelectorAll('.btn-primary, .btn-action').forEach(button => {
                button.addEventListener('click', function(e) {
                    // Remove existing ripples
                    this.querySelectorAll('.ripple').forEach(ripple => ripple.remove());

                    const ripple = document.createElement('span');
                    ripple.classList.add('ripple');
                    this.appendChild(ripple);

                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);

                    ripple.style.width = ripple.style.height = `${size}px`;
                    ripple.style.left = `${e.clientX - rect.left - size/2}px`;
                    ripple.style.top = `${e.clientY - rect.top - size/2}px`;

                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });

            // Add visual feedback on form elements focus
            document.querySelectorAll('.prompt-textarea, .api-select').forEach(el => {
                el.addEventListener('focus', function() {
                    this.parentNode.classList.add('focused');
                });

                el.addEventListener('blur', function() {
                    this.parentNode.classList.remove('focused');
                });
            });
        }

        // Enhanced progress visualization
        function enhanceProgressVisuals() {
            // Make progress updates more dynamic
            const originalSetInterval = window.setInterval;
            progressInterval = originalSetInterval(() => {
                if (progress < 95) {
                    // Add slight randomness to make it feel more realistic
                    const increment = Math.random() * 10 * (1 - progress/100); // Slow down as we get closer to 100%
                    progress += increment;
                    if (progress > 95) progress = 95;

                    // Smooth transition for progress bar
                    stepStatus.style.transition = 'width 0.8s cubic-bezier(0.165, 0.84, 0.44, 1)';
                    stepStatus.style.width = progress + '%';

                    // Update status message with typing animation effect
                    if (progress < 30) {
                        animateText('Processing your prompt...');
                    } else if (progress < 60) {
                        animateText('Generating animation frames...');
                    } else if (progress < 85) {
                        animateText('Adding final touches...');
                    } else {
                        animateText('Almost ready...');
                    }
                }
            }, 700); // Slightly slower updates for a more realistic feel
        }

        // Text animation effect for progress updates
        function animateText(newText) {
            if (progressText.textContent !== newText) {
                progressText.style.opacity = '0';
                setTimeout(() => {
                    progressText.textContent = newText;
                    progressText.style.opacity = '1';
                }, 300);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Add our enhanced button interactivity
            addButtonInteractivity();

            // Original event listener for generate button
            const originalGenerateClick = generateBtn.onclick;
            generateBtn.onclick = null; // Remove existing handler

            // Enhanced generate button click handler
            generateBtn.addEventListener('click', async () => {
                const prompt = promptInput.value.trim();
                const provider = apiProviderSelect.value;

                if (!prompt) {
                    showToast('error', 'Empty Prompt', 'Please enter a prompt to generate an animation.');
                    return;
                }

                // Add loading state to button
                generateBtn.classList.add('loading');
                generateBtn.innerHTML = '<span class="spinner"></span> Generating...';
                generateBtn.disabled = true;

                // Reset UI state
                placeholderMessage.style.display = 'flex';
                animationResult.style.display = 'none';
                animationDisplay.innerHTML = '';

                // Show progress with enhanced visuals
                progressContainer.style.display = 'block';
                stepStatus.style.width = '0%';
                progressText.textContent = 'Preparing your animation...';

                // Initialize progress and start enhanced progress monitoring
                progress = 0;
                enhanceProgressVisuals();

                try {
                    // PLACEHOLDER FOR ACTUAL API CALL
                    // This is where the actual API call would happen.
                    // For now, we'll simulate it with a timeout

                    setTimeout(() => {
                        // Simulate API response
                        const responseData = {
                            video_url: 'https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4',
                            prompt: prompt,
                            provider: provider
                        };

                        // Stop progress animation
                        clearInterval(progressInterval);

                        // Complete progress bar
                        stepStatus.style.width = '100%';
                        progressText.textContent = 'Animation complete!';

                        // Display the animation
                        if (responseData.video_url) {
                            placeholderMessage.style.display = 'none';

                            // Create video element with string concatenation instead of template literals
                            const videoContainer = document.createElement('div');
                            videoContainer.className = 'video-container';
                            videoContainer.innerHTML =
                                '<video id="animation-video" controls>' +
                                '<source src="' + responseData.video_url + '" type="video/mp4">' +
                                'Your browser does not support the video tag.' +
                                '</video>' +
                                '<div class="animation-controls">' +
                                '<button class="btn-action" onclick="document.getElementById(\'animation-video\').play()">' +
                                '<i class="fas fa-play"></i>' +
                                '</button>' +
                                '<button class="btn-action" onclick="document.getElementById(\'animation-video\').pause()">' +
                                '<i class="fas fa-pause"></i>' +
                                '</button>' +
                                '<a href="' + responseData.video_url + '" download="animation.mp4" class="btn-action">' +
                                '<i class="fas fa-download"></i>' +
                                '</a>' +
                                '</div>';

                            animationDisplay.appendChild(videoContainer);

                            // Show animation info
                            animationResult.style.display = 'block';
                            resultProvider.textContent = getProviderDisplayName(provider);
                            resultPrompt.textContent = prompt;

                            // Exit loading state
                            generateBtn.classList.remove('loading');
                            generateBtn.innerHTML = '<i class="fas fa-magic"></i> Generate Animation';
                            generateBtn.disabled = false;

                            // Apply interactivity to new buttons
                            addButtonInteractivity();

                            // Show success notification
                            showNotification('success', 'Animation Ready!', 'Your animation has been generated successfully.', 5000);
                        } else {
                            throw new Error('No animation was returned');
                        }
                    }, 3000);

                } catch (error) {
                    // Handle errors
                    clearInterval(progressInterval);
                    showToast('error', 'Generation Failed', error.message || 'Failed to generate animation.');
                    generateBtn.classList.remove('loading');
                    generateBtn.innerHTML = '<i class="fas fa-magic"></i> Try Again';
                    generateBtn.disabled = false;
                }
            });

            // Text animation effect for progress updates
            function animateText(newText) {
                if (progressText.textContent !== newText) {
                    progressText.style.opacity = '0';
                    setTimeout(() => {
                        progressText.textContent = newText;
                        progressText.style.opacity = '1';
                    }, 300);
                }
            }
        });
    </script>
</body>
